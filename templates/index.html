<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Regex-app</title>
    <style>
        body { font-family: sans-serif; margin: 40px; }
        .field { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        textarea { width: 100%; height: 100px; }
        .error { color: #b00020; margin-bottom: 10px; }
        .ok { color: #008000; margin-bottom: 10px; }
        mark { background: yellow; }
        .result-box {
            border: 1px solid #ccc;
            padding: 10px;
            min-height: 50px;
            white-space: pre-wrap;
        }
        button {
            padding: 8px 16px;
            font-size: 14px;
        }
    </style>
</head>
<body>
<h1>Проверка регулярных выражений</h1>

<form method="post" action="/">
    <div class="field">
        <label for="pattern">Регулярное выражение</label>
        <textarea id="pattern" name="pattern">{{.Pattern}}</textarea>
    </div>

    <div class="field">
        <label for="text">Текст для поиска</label>
        <textarea id="text" name="text">{{.Text}}</textarea>
    </div>

    <button type="submit">Проверить</button>
</form>

<hr>

{{if .ErrorMessage}}
<div class="error">{{.ErrorMessage}}</div>
{{end}}

{{if .ParseOk}}
<div class="ok">Синтаксис регулярного выражения корректен.</div>
{{end}}

{{if .TimedOut}}
<div class="error">Выполнение было остановлено (подозрение на ReDoS / слишком сложный шаблон).</div>
{{end}}

<h2>Результат поиска</h2>
<div class="result-box">
    {{if .ResultHTML}}
        {{.ResultHTML}}
    {{else}}
        (пока ничего)
    {{end}}
</div>

{{if .HasMultiple}}
    <h2>Все найденные комбинации</h2>
    <ul>
        {{range .MatchList}}
            <li>
                {{.Index}}: [{{.From}}, {{.To}}] — "{{.Text}}"
            </li>
        {{end}}
    </ul>
{{end}}


</body>
</html>
